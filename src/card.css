/* Component: card */

/* Base card */
@utility card {
  position: relative;
  display: flex;
  flex-direction: column;
  border-radius: var(--radius-box);
  outline-width: 2px;
  transition: outline 0.2s ease-in-out;
  outline: 0 solid transparent;
  outline-offset: 2px;

  &:focus {
    outline-style: none;
    @media (forced-colors: active) {
      outline: 2px solid transparent;
      outline-offset: 2px;
    }
  }

  &:focus-visible {
    outline-color: currentColor;
  }

  :where(figure:first-child) {
    overflow: hidden;
    border-start-start-radius: inherit;
    border-start-end-radius: inherit;
    border-end-start-radius: unset;
    border-end-end-radius: unset;
  }

  :where(figure:last-child) {
    overflow: hidden;
    border-start-start-radius: unset;
    border-start-end-radius: unset;
    border-end-start-radius: inherit;
    border-end-end-radius: inherit;
  }

  figure {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &:has(> input:is(input[type="checkbox"], input[type="radio"])) {
    cursor: pointer;
    user-select: none;
  }

  &:has(> :checked) {
    outline: 2px solid currentColor;
  }
}

/* Card body */
@utility card-body {
  display: flex;
  flex: auto;
  flex-direction: column;
  gap: 0.5rem;
  padding: var(--card-p, 1.5rem);
  font-size: var(--card-fs, 0.875rem);

  :where(p) {
    flex-grow: 1;
  }
}

/* Card title */
@utility card-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: var(--cardtitle-fs, 1.125rem);
  font-weight: 600;
}

/* Card actions */
@utility card-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  gap: 0.5rem;
}

/* Card side (horizontal layout) */
@utility card-side {
  align-items: stretch;
  flex-direction: row;

  :where(figure:first-child) {
    overflow: hidden;
    border-start-start-radius: inherit;
    border-start-end-radius: unset;
    border-end-start-radius: inherit;
    border-end-end-radius: unset;
  }

  :where(figure:last-child) {
    overflow: hidden;
    border-start-start-radius: unset;
    border-start-end-radius: inherit;
    border-end-start-radius: unset;
    border-end-end-radius: inherit;
  }

  figure > * {
    max-width: unset;
  }

  :where(figure > *) {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

/* Border variants */
@utility card-border {
  border: var(--border) solid var(--color-base-200);
}

@utility card-dash {
  border: var(--border) dashed var(--color-base-200);
}

/* Size variants */
@utility card-xs {
  .card-body {
    --card-p: 0.5rem;
    --card-fs: 0.6875rem;
  }

  .card-title {
    --cardtitle-fs: 0.875rem;
  }
}

@utility card-sm {
  .card-body {
    --card-p: 1rem;
    --card-fs: 0.75rem;
  }

  .card-title {
    --cardtitle-fs: 1rem;
  }
}

@utility card-md {
  .card-body {
    --card-p: 1.5rem;
    --card-fs: 0.875rem;
  }

  .card-title {
    --cardtitle-fs: 1.125rem;
  }
}

@utility card-lg {
  .card-body {
    --card-p: 2rem;
    --card-fs: 1rem;
  }

  .card-title {
    --cardtitle-fs: 1.25rem;
  }
}

@utility card-xl {
  .card-body {
    --card-p: 2.5rem;
    --card-fs: 1.125rem;
  }

  .card-title {
    --cardtitle-fs: 1.375rem;
  }
}

/* Image full overlay - needs !important to override card's display:flex due to alphabetical CSS ordering */
@utility image-full {
  display: grid !important;

  > * {
    grid-column-start: 1;
    grid-row-start: 1;
  }

  > .card-body {
    color: var(--color-neutral-content);
    position: relative;
  }

  :where(figure) {
    overflow: hidden;
    border-radius: inherit;
  }

  > figure img {
    height: 100%;
    object-fit: cover;
    filter: brightness(28%);
  }
}
